---
import { SITE } from "@config";
import Breadcrumbs from "@components/Breadcrumbs.astro";
import Footer from "@components/Footer.astro";
import Header from "@components/Header.astro";
import Layout from "./Layout.astro";

export interface Props {
  frontmatter: {
    title: string;
    description?: string;
  };
}

const { frontmatter } = Astro.props;
---

<Layout title={`${frontmatter.title} | ${SITE.title}`}>
  <Header activeNav="about" />
  <Breadcrumbs />
  <main id="main-content">
    <section id="about" class="mb-28 mt-12 max-w-3xl">
      <div class="prose prose-lg max-w-none text-lg leading-relaxed font-mono">
        <slot />
      </div>
    </section>

    <section id="support" class="mb-28 max-w-3xl">
      <a
        href="https://ko-fi.com/a_sumo"
        target="_blank"
        rel="noopener noreferrer"
        class="kofi-container group relative inline-flex items-center gap-2"
      >
        <img src="/assets/icons/kofi-icon.png" alt="Ko-fi" class="kofi-icon h-10" />
        <span class="kofi-text">Buy me a coffee</span>
      </a>
    </section>
  </main>
  <Footer />
</Layout>

<style>
  .kofi-container:hover .kofi-icon {
    animation: shake 0.5s ease-in-out;
  }

  .kofi-text {
    position: absolute;
    left: 100%;
    margin-left: 0.75rem;
    padding: 0.5rem 1rem;
    background-color: #ff5e5b;
    color: white;
    font-weight: 500;
    border-radius: 0.5rem;
    white-space: nowrap;
    opacity: 0;
    transform: translateX(-10px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: none;
  }

  .kofi-text::before {
    content: '';
    position: absolute;
    right: 100%;
    top: 50%;
    transform: translateY(-50%);
    border: 6px solid transparent;
    border-right-color: #ff5e5b;
  }

  .kofi-container:hover .kofi-text {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
  }

  @keyframes shake {
    0%, 100% { transform: rotate(0deg); }
    20% { transform: rotate(-10deg); }
    40% { transform: rotate(10deg); }
    60% { transform: rotate(-10deg); }
    80% { transform: rotate(10deg); }
  }
</style>