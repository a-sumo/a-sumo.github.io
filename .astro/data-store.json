[["Map",1,2,7,8],"meta::meta",["Map",3,4,5,6],"astro-version","4.16.18","config-digest","8a28d6a84a001a22","blog",["Map",9,10],"post1",{"id":9,"data":11,"body":24,"filePath":25,"digest":26,"rendered":27},{"author":12,"pubDatetime":13,"title":14,"draft":15,"tags":16,"description":23},"Armand Sumo",["Date","2025-12-15T07:00:00.000Z"],"Eyedropper for Spectacles AR Glasses",false,[17,18,19,20,21,22],"augmented reality","ar","spectacles","lens studio","ui","eyedropper","Eyedropper","\n\u003Cimg src=\"/assets/color_palette_editor_test.gif\" width=300  alt=\"Eyedropper Test\" >\n\n\n## 1. Eyedropper\n\nAn eyedropper [is](https://en.wikipedia.org/wiki/Color_picker)\n> a tool that allows a user to read a color at a specific point in an image, or position on a display\n\n\nI have been wondering how this kind of tool and overall interaction mode might translate from desktop interfaces to augmented reality. \n\nSo I made an eye dropper in Lens Studio and tested it with the 2024 Spectacles Augmented Reality glasses. \nFirst we need something to read colors from. Because we're not operating at the level of the Operating System, but rather within a Lens, we will read from the user's camera feed. \nBecause this feed is quite large, and we're planning to sample a single pixel from it,  we need to crop it down. Fortunately, the Spectacles Samples provide a project that implements a cropping functionality that we'll reuse here. \n\nAfter the first cropping interaction, any individual pixel might still be too small to be resolved by the user's eyes. Taking inspiration from [Figma's eyedropper UI](https://help.figma.com/hc/en-us/articles/27643269375767-Sample-colors-with-the-eyedropper-tool), I implemented a menu containing:\n- a magnified view of a sampled area covered with a grid which represents the pixel samples.\n- an indicator of sampled pixel's color.\nBoth update in real-time, as the the suer hovers on the crop area's surface.\n\nThe recently released Spectacles UI Kit took care of many of the key UI elements. This was a great relief, a feeling I previously felt during the Mixed Reality Toolkit 2.0 release for Unity in 2022. With frames and bacgrounds taken care of, I could focus my attention on bespoke materials for pixel-perfect rectangle corners and grids.\nBecause my prior 3D development experience involves a significant amount of Three.js, when using Lens Studio I find myself leaning towards writing shader code rather than wrangling material graph nodes. \nFor this reason, I've priotitized the use of The Material Graph Editor's Custom Code Nodes.\n\nBelow is a screenshot of Procedural Grid's Material Graph.\n\u003Cimg src=\"/assets/texture_grid_material_editor.png\" width=1000  alt=\"Texture Grid Material Editor\">\n\n\u003Cdetails>\n\u003Csummary>Procedural Grid Custom Code Node\u003C/summary>\n\n```glsl\ninput_float gridCountX;\ninput_float gridCountY;\ninput_float strokeWidth;\ninput_float softness;\ninput_float feather;\ninput_vec4 gridColor;\ninput_vec2 surfaceUVCoords;\ninput_vec3 surfaceWorldScale;\ninput_vec2 uvOffset;\n\noutput_vec4 Output;\n\nvoid main()\n{\n    float aspect = surfaceWorldScale.x / surfaceWorldScale.y;\n    \n    vec2 p = surfaceUVCoords - uvOffset;\n    vec2 pNorm = vec2(p.x, p.y / aspect);\n    vec2 pShifted = pNorm + 0.5;\n    \n    float halfStroke = strokeWidth * 0.5;\n    float gridMask = 0.0;\n    \n    for (float i = 1.0; i \u003C= gridCountX - 1.0; i += 1.0) {\n        float lineX = i / gridCountX;\n        float distToLine = abs(pShifted.x - lineX);\n        float lineMask = 1.0 - smoothstep(halfStroke - softness, halfStroke + softness + feather, distToLine);\n        gridMask = max(gridMask, lineMask);\n    }\n    \n    for (float j = 1.0; j \u003C= gridCountY  - 1.0; j += 1.0) {\n        float lineY = j / gridCountY;\n        float distToLine = abs(pShifted.y - lineY);\n        float lineMask = 1.0 - smoothstep(halfStroke - softness, halfStroke + softness + feather, distToLine);\n        gridMask = max(gridMask, lineMask);\n    }\n    \n    Output = gridColor * gridMask;\n}\n```\n\u003C/details>\n\nThe logic for reading colors and displaying is mainly handled by a class I've named CropAreaSelector.\n\nI've listed a few crucial method from CropAreaSelector class, asthese might come in handy in other scenarios.\nIt showcases the use of ProceduralTextureProviders, getPixels() and setPixels().\ngetPixels() to set pixels in a texture using values stored in a buffer and setPixels() for reading pixels values from a texture and storing them a buffer. \n\n\u003Cdetails>\n\u003Csummary> CropAreaSelector Methods \u003C/summary>\n\n```ts\nprivate updateCropArea(localPosition: vec2): void {\n    if (!this.screenCropProvider || !this.cropAreaMaterial) {\n        return;\n    }\n\n    const gridSize = this._validatedGridScale;\n    const halfGrid = Math.floor(gridSize / 2);\n\n    const centerPixel = this.localToPixelCoords(localPosition);\n    const startPixel = this.clampCropRegion(centerPixel, gridSize, halfGrid);\n\n    const croppedPixels = this.sampleCroppedPixels(startPixel, gridSize);\n    this.updateCropAreaTexture(croppedPixels, gridSize);\n    this.updateSelectedColor(croppedPixels, gridSize, halfGrid);\n    this.resetSelectionToCenter();\n\n    this._onCropAreaChangedEvent.invoke();\n}\n\nprivate localToPixelCoords(localPosition: vec2): vec2 {\n    return new vec2(\n        Math.round((localPosition.x + 0.5) * (this.screenCropWidth - 1)),\n        Math.round((localPosition.y + 0.5) * (this.screenCropHeight - 1))\n    );\n}\n\nprivate clampCropRegion(centerPixel: vec2, gridSize: number, halfGrid: number): vec2 {\n    return new vec2(\n        Math.max(0, Math.min(this.screenCropWidth - gridSize, centerPixel.x - halfGrid)),\n        Math.max(0, Math.min(this.screenCropHeight - gridSize, centerPixel.y - halfGrid))\n    );\n}\n\nprivate sampleCroppedPixels(startPixel: vec2, gridSize: number): Uint8Array {\n    const pixelBuffer = new Uint8Array(gridSize * gridSize * 4);\n    this.screenCropProvider.getPixels(\n        startPixel.x,\n        startPixel.y,\n        gridSize,\n        gridSize,\n        pixelBuffer\n    );\n    return pixelBuffer;\n}\n\nprivate updateCropAreaTexture(croppedPixels: Uint8Array, gridSize: number): void {\n    const cropAreaTexture = ProceduralTextureProvider.createWithFormat(\n        gridSize,\n        gridSize,\n        TextureFormat.RGBA8Unorm\n    );\n    const texProvider = cropAreaTexture.control as ProceduralTextureProvider;\n    texProvider.setPixels(0, 0, gridSize, gridSize, croppedPixels);\n\n    this.cropAreaMaterial.mainTexture = cropAreaTexture;\n}\n\nprivate updateSelectedColor(croppedPixels: Uint8Array, gridSize: number, halfGrid: number): void {\n    const centerPixelIndex = halfGrid * gridSize + halfGrid;\n    const i = centerPixelIndex * 4;\n\n    const color = new vec4(\n        croppedPixels[i] * ONE_OVER_255,\n        croppedPixels[i + 1] * ONE_OVER_255,\n        croppedPixels[i + 2] * ONE_OVER_255,\n        1.0\n    );\n\n    this.selectedColorMaterial.baseColor = color;\n}\n```\n\n\u003C/details>","src/content/blog/post1.md","6e7827be34777f49",{"html":28,"metadata":29},"\u003Cimg src=\"/assets/color_palette_editor_test.gif\" width=\"300\" alt=\"Eyedropper Test\">\n\u003Ch2 id=\"1-eyedropper\">1. Eyedropper\u003C/h2>\n\u003Cp>An eyedropper \u003Ca href=\"https://en.wikipedia.org/wiki/Color_picker\">is\u003C/a>\u003C/p>\n\u003Cblockquote>\n\u003Cp>a tool that allows a user to read a color at a specific point in an image, or position on a display\u003C/p>\n\u003C/blockquote>\n\u003Cp>I have been wondering how this kind of tool and overall interaction mode might translate from desktop interfaces to augmented reality.\u003C/p>\n\u003Cp>So I made an eye dropper in Lens Studio and tested it with the 2024 Spectacles Augmented Reality glasses.\nFirst we need something to read colors from. Because we’re not operating at the level of the Operating System, but rather within a Lens, we will read from the user’s camera feed.\nBecause this feed is quite large, and we’re planning to sample a single pixel from it,  we need to crop it down. Fortunately, the Spectacles Samples provide a project that implements a cropping functionality that we’ll reuse here.\u003C/p>\n\u003Cp>After the first cropping interaction, any individual pixel might still be too small to be resolved by the user’s eyes. Taking inspiration from \u003Ca href=\"https://help.figma.com/hc/en-us/articles/27643269375767-Sample-colors-with-the-eyedropper-tool\">Figma’s eyedropper UI\u003C/a>, I implemented a menu containing:\u003C/p>\n\u003Cul>\n\u003Cli>a magnified view of a sampled area covered with a grid which represents the pixel samples.\u003C/li>\n\u003Cli>an indicator of sampled pixel’s color.\nBoth update in real-time, as the the suer hovers on the crop area’s surface.\u003C/li>\n\u003C/ul>\n\u003Cp>The recently released Spectacles UI Kit took care of many of the key UI elements. This was a great relief, a feeling I previously felt during the Mixed Reality Toolkit 2.0 release for Unity in 2022. With frames and bacgrounds taken care of, I could focus my attention on bespoke materials for pixel-perfect rectangle corners and grids.\nBecause my prior 3D development experience involves a significant amount of Three.js, when using Lens Studio I find myself leaning towards writing shader code rather than wrangling material graph nodes.\nFor this reason, I’ve priotitized the use of The Material Graph Editor’s Custom Code Nodes.\u003C/p>\n\u003Cp>Below is a screenshot of Procedural Grid’s Material Graph.\n\u003Cimg src=\"/assets/texture_grid_material_editor.png\" width=\"1000\" alt=\"Texture Grid Material Editor\">\u003C/p>\n\u003Cdetails>\n\u003Csummary>Procedural Grid Custom Code Node\u003C/summary>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"glsl\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_float gridCountX;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_float gridCountY;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_float strokeWidth;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_float softness;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_float feather;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_vec4 gridColor;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_vec2 surfaceUVCoords;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_vec3 surfaceWorldScale;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">input_vec2 uvOffset;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">output_vec4 Output;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">void\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> main\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> aspect \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#C5E478\"> surfaceWorldScale\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">x\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> /\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#C5E478\"> surfaceWorldScale\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#C5E478\">y\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    vec2 p \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> surfaceUVCoords \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">-\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> uvOffset;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    vec2 pNorm \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> vec2\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#C5E478\">p\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\">x\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#C5E478\"> p\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\">y\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> /\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> aspect)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    vec2 pShifted \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> pNorm \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">+\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.5\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> halfStroke \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> strokeWidth \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">*\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.5\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridMask \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    for\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> i \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">; i \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">&#x3C;=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridCountX \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">-\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">; i \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">+=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> lineX \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> i \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">/\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridCountX;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> distToLine \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> abs\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#C5E478\">pShifted\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\">x\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> -\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> lineX)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> lineMask \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> -\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> smoothstep\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(halfStroke \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">-\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> softness\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> halfStroke \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">+\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> softness \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">+\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> feather\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> distToLine)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        gridMask \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> max\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(gridMask\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> lineMask)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    for\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> j \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">; j \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">&#x3C;=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridCountY  \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">-\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">; j \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">+=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> lineY \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> j \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">/\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridCountY;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> distToLine \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> abs\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#C5E478\">pShifted\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#C5E478\">y\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> -\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> lineY)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">        float\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> lineMask \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1.0\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> -\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> smoothstep\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(halfStroke \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">-\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> softness\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> halfStroke \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">+\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> softness \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">+\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> feather\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> distToLine)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        gridMask \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> max\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\">(gridMask\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#82AAFF\">,\u003C/span>\u003Cspan style=\"color:#6F42C1;--shiki-dark:#82AAFF\"> lineMask)\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    \u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    Output \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">=\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridColor \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">*\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridMask;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003C/details>\n\u003Cp>The logic for reading colors and displaying is mainly handled by a class I’ve named CropAreaSelector.\u003C/p>\n\u003Cp>I’ve listed a few crucial method from CropAreaSelector class, asthese might come in handy in other scenarios.\nIt showcases the use of ProceduralTextureProviders, getPixels() and setPixels().\ngetPixels() to set pixels in a texture using values stored in a buffer and setPixels() for reading pixels values from a texture and storing them a buffer.\u003C/p>\n\u003Cdetails>\n\u003Csummary> CropAreaSelector Methods \u003C/summary>\n\u003Cpre class=\"astro-code astro-code-themes min-light night-owl\" style=\"background-color:#ffffff;--shiki-dark-bg:#011627;color:#24292eff;--shiki-dark:#d6deeb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">private \u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">updateCropArea\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(localPosition: vec2): \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">void\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    if\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">!\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">screenCropProvider\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> ||\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> !\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">cropAreaMaterial\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">        return\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> gridSize\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic\">_validatedGridScale\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> halfGrid\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">floor\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">gridSize\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> /\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 2\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> centerPixel\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">localToPixelCoords\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">localPosition\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> startPixel\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">clampCropRegion\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">centerPixel\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> halfGrid\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> croppedPixels\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic\"> this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">sampleCroppedPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">startPixel\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> gridSize\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">updateCropAreaTexture\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(croppedPixels\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">updateSelectedColor\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(croppedPixels\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> halfGrid);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">resetSelectionToCenter\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic\">_onCropAreaChangedEvent\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">invoke\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">private \u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">localToPixelCoords\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(localPosition: vec2): vec2 {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> vec2\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">        Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">round\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">((\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">localPosition\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">x\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> +\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.5\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">*\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">screenCropWidth\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> -\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">))\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">        Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">round\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">((\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">localPosition\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">y\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> +\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0.5\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">) \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">*\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> (\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">screenCropHeight\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> -\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">private \u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">clampCropRegion\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(centerPixel: vec2\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize: number\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> halfGrid: number): vec2 {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> vec2\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">        Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">max\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\"> Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">min\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">screenCropWidth\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> -\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\"> centerPixel\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">x\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> -\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> halfGrid))\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">        Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">max\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\"> Math\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">min\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">screenCropHeight\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> -\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\"> centerPixel\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">y\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> -\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> halfGrid))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">private \u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">sampleCroppedPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(startPixel: vec2\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize: number): Uint8Array {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> pixelBuffer\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> Uint8Array\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">gridSize\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> gridSize\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 4\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic\">screenCropProvider\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">getPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">        startPixel\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">x\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">        startPixel\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">y\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">        pixelBuffer\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">    return\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> pixelBuffer;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">private \u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">updateCropAreaTexture\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(croppedPixels: Uint8Array\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize: number): \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">void\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> cropAreaTexture\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> ProceduralTextureProvider\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">createWithFormat\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">        gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">        gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">        TextureFormat\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic\">RGBA8Unorm\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> texProvider\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> cropAreaTexture\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic\">control\u003C/span>\u003Cspan style=\"color:#D32F2F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\"> as\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#FFCB8B;--shiki-dark-font-style:italic\"> ProceduralTextureProvider\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#D6DEEB\">    texProvider\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">setPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 0\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> croppedPixels);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic\">cropAreaMaterial\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">mainTexture\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> cropAreaTexture;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">private \u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\">updateSelectedColor\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(croppedPixels: Uint8Array\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> gridSize: number\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#D6DEEB\">,\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> halfGrid: number): \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\">void\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> centerPixelIndex\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> halfGrid\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> gridSize\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> +\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> halfGrid\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> i\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\"> centerPixelIndex\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 4\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">    const\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> color\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#7FDBCA\"> new\u003C/span>\u003Cspan style=\"color:#6F42C1;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> vec4\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">        croppedPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">[\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">i\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">]\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> ONE_OVER_255\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">        croppedPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">[\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">i \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">+\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 1\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">]\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> ONE_OVER_255\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">        croppedPixels\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">[\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic\">i \u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\">+\u003C/span>\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\"> 2\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">]\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> *\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic\"> ONE_OVER_255\u003C/span>\u003Cspan style=\"color:#212121;--shiki-dark:#C792EA\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#F78C6C\">        1.0\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">    );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#1976D2;--shiki-dark:#7FDBCA\">    this\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#1976D2;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic\">selectedColorMaterial\u003C/span>\u003Cspan style=\"color:#24292EFF;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic\">.\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#BAEBE2\">baseColor\u003C/span>\u003Cspan style=\"color:#D32F2F;--shiki-dark:#C792EA\"> =\u003C/span>\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\"> color;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#24292EFF;--shiki-dark:#D6DEEB\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\u003C/code>\u003C/pre>\n\u003C/details>",{"headings":30,"imagePaths":35,"frontmatter":11},[31],{"depth":32,"slug":33,"text":34},2,"1-eyedropper","1. Eyedropper",[]]